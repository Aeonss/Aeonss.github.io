<!DOCTYPE html>
<html>
<head>
    <title>GitHub2Email</title>
    <style>
        h1 {
            font-size: 2em; /* Adjust the font size as needed */
            color: #fff;
            text-align: center;
        }

        body {
            margin: 0;
            background-color: #000;
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden; /* Hide horizontal scrollbar */
            overflow-y: -moz-scrollbars-none; /* Hide scrollbar for Firefox */
        }

        #form {
            position: absolute;
            margin-top: 100px;
            color: white;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            z-index: 2;
        }

        #form input, #form button {
            font-size: 20px;
        }

        #network {
            position:fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        #results {
            color:white;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            margin-top: 200px;
            padding-bottom: 500px;
        }

        #results table {
            display: none;
            border-collapse: collapse;
            background-color: black !important;
            width: 100%;
        }

        #results th, #results td {
            border: 1px solid white;
            padding: 8px;
            text-align: left;
        }
    </style>
</head>
<body>
    <h1 class="title">GitHub2Email</h1>
    
    <form id="form">
        <input type="text" id="username" name="username" placeholder="Github username" required>
        <button type="submit">Search</button>
    </form>

    <div id="results">
        <table>
            <tr>
                <th>Name</th>
                <th>Email</th>
            </tr>
        </table>
    </div>

    <script>
        document.getElementById("form").addEventListener("submit", function (event) {
            event.preventDefault();
            
            document.querySelector("#results table").querySelectorAll("tr:not(:first-child)").forEach(row => row.remove());

            const username = document.getElementById("username").value;
            const emailSet = {};

            // Define your GitHub personal access token
            const accessToken = "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";

            // Define the API URL for retrieving user's repositories
            const reposUrl = `https://api.github.com/users/${username}/repos`;

            const headers = {
                "Authorization": `token ${accessToken}`,
            };

            fetch(reposUrl, { headers })
                .then((response) => response.json())
                .then((reposData) => {
                    const fetchCommits = (repo) => {
                        const commitsUrl = `${repo.url}/commits`;

                        return fetch(commitsUrl, { headers })
                            .then((response) => response.json())
                            .then((commitsData) => {
                                for (const commit of commitsData) {
                                    const authorEmail = commit.commit.author.email;
                                    const authorName = commit.commit.author.name;

                                    // Check if the email is not already in the set before adding it
                                    if (authorEmail && !emailSet[authorEmail]) {
                                        emailSet[authorEmail] = true;
                                        const resultContainer = document.querySelector("#results table");
                                        const newRow = resultContainer.insertRow();
                                        const nameCell = newRow.insertCell(0);
                                        const emailCell = newRow.insertCell(1);
                                        nameCell.textContent = authorName || 'N/A';
                                        emailCell.textContent = authorEmail;
                                    
                                        // Make the table visible after entries are added
                                        resultContainer.style.display = "table";
                                    }
                                }
                            })
                            .catch((error) => {
                                console.error(`An exception occurred: ${error}`);
                            });
                    };

                    const fetchPromises = reposData.map(fetchCommits);

                    Promise.all(fetchPromises)
                        .catch((error) => {
                            console.error(`An exception occurred: ${error}`);
                        });
                })
                .catch((error) => {
                    console.error(`An exception occurred: ${error}`);
                });
        });
    </script>


    <canvas id="network"></canvas>
    <script>
        const canvas = document.getElementById('network');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const numDots = 100;
        const dots = [];

        function Dot(x, y, radius) {
            this.x = x;
            this.y = y;
            this.radius = radius;
            this.velocity = {
                x: (Math.random() - 0.5) * 1,  // Reduced velocity
                y: (Math.random() - 0.5) * 1   // Reduced velocity
            };
        }

        Dot.prototype.draw = function () {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
            ctx.fillStyle = '#fff';
            ctx.fill();
        }

        Dot.prototype.update = function () {
            this.x += this.velocity.x;
            this.y += this.velocity.y;

            if (this.x + this.radius > canvas.width || this.x - this.radius < 0) {
                this.velocity.x = -this.velocity.x;
            }

            if (this.y + this.radius > canvas.height || this.y - this.radius < 0) {
                this.velocity.y = -this.velocity.y;
            }

            this.draw();
        }

        for (let i = 0; i < numDots; i++) {
            const radius = Math.random() * 3 + 1;
            const x = Math.random() * (canvas.width - radius * 2) + radius;
            const y = Math.random() * (canvas.height - radius * 2) + radius;
            dots.push(new Dot(x, y, radius));
        }

        function connectDots() {
            for (let i = 0; i < dots.length; i++) {
                for (let j = i; j < dots.length; j++) {
                    const dx = dots[i].x - dots[j].x;
                    const dy = dots[i].y - dots[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < 80) {
                        ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(dots[i].x, dots[i].y);
                        ctx.lineTo(dots[j].x, dots[j].y);
                        ctx.stroke();
                    }
                }
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            dots.forEach(dot => {
                dot.update();
            });

            connectDots();
        }

        canvas.addEventListener('mousemove', (event) => {
            const mouseX = event.clientX;
            const mouseY = event.clientY;

            dots.forEach(dot => {
                const dx = mouseX - dot.x;
                const dy = mouseY - dot.y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < 100) {
                    dot.velocity.x = dx / 100;
                    dot.velocity.y = dy / 100;
                }
            });
        });


        animate();
    </script>

</body>
</html>
